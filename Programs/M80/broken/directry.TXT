This program checks EOF after GET and PUT, so the logic is wrong.
